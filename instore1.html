<!-- instore-ipad.html  |  Gardener & Son — In-Store iPad Display / Sales Tool (KIOSK SLIDESHOW MODE + right panel scroll) -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Gardener & Son — In-Store Gardens</title>

  <meta name="description" content="In-store iPad display: six gardens + sales talk for Gardener & Son." />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=IBM+Plex+Sans:wght@300;400;500&display=swap" rel="stylesheet" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            serif: ['"Abril Fatface"', "serif"],
            sans: ['"IBM Plex Sans"', "sans-serif"],
          },
          colors: {
            "gardener-green": "#3d4535",
            "nostalgic-beige": "#fff0dc",
          },
        },
      },
    };
  </script>

  <style>
    * { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
    body { font-family: "IBM Plex Sans", sans-serif; }
    h1, h2, h3, .font-serif { font-family: "Abril Fatface", serif; font-weight: 400; }

    html, body { height: 100%; }
    body { overscroll-behavior: none; overflow: hidden; }
    .safe { padding-top: env(safe-area-inset-top); padding-bottom: env(safe-area-inset-bottom); }
    .no-select { -webkit-user-select: none; user-select: none; }
    :focus-visible { outline: 2px solid rgba(61, 69, 53, 0.55); outline-offset: 3px; }

    .fade { transition: opacity 320ms ease; }

    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    @media (prefers-reduced-motion: reduce) { .fade { transition: none !important; } }
  </style>
</head>

<body class="bg-nostalgic-beige text-gardener-green safe">
  <div class="h-[100dvh] w-full flex flex-col pt-1">
    <main class="flex-1">
      <div class="max-w-7xl mx-auto px-6 lg:px-8 py-5 h-full">
        <section id="view-gardens" class="grid lg:grid-cols-12 gap-8 h-full">
          <!-- Left -->
          <div class="lg:col-span-8 flex flex-col min-h-0">
            <div class="border border-gardener-green/10 bg-gardener-green/5 overflow-hidden flex flex-col">
              <div id="imagePanel" class="fade opacity-100 w-full aspect-[4/3] bg-gardener-green/10"></div>

              <div class="border-t border-gardener-green/10 bg-nostalgic-beige">
                <div class="px-5 py-3 flex items-end justify-between gap-6">
                  <div class="min-w-0">
                    <div id="gardenTitle" class="font-serif text-[1.65rem] leading-tight truncate">Wild Cottage Garden</div>
                    <div id="gardenSubtitle" class="text-sm opacity-70 mt-1 line-clamp-2">
                      Soft pastels and silver-white tones, hybrid native–exotic planting for birds and habitat.
                    </div>
                  </div>
                  <div class="flex gap-3 shrink-0">
                    <button id="prevBtn" class="no-select text-sm border border-gardener-green px-5 py-3 hover:bg-gardener-green hover:text-nostalgic-beige transition-colors">←</button>
                    <button id="nextBtn" class="no-select text-sm border border-gardener-green px-5 py-3 hover:bg-gardener-green hover:text-nostalgic-beige transition-colors">→</button>
                  </div>
                </div>
              </div>
            </div>

            <div class="mt-3 min-h-0">
              <div id="thumbRow" class="hide-scrollbar flex gap-4 overflow-x-auto pb-1 pr-8 snap-x snap-mandatory"></div>
            </div>
          </div>

          <!-- Right -->
          <div class="lg:col-span-4 flex flex-col min-h-0">
            <div class="border border-gardener-green/10 bg-gardener-green/5 p-7 flex-1 flex flex-col min-h-0">
              <div>
                <div class="text-xs uppercase tracking-[0.18em] opacity-60">What this garden delivers</div>
                <h2 class="font-serif text-4xl leading-[1.02] mt-2">Beauty under real conditions.</h2>
              </div>

              <!-- UPDATED: make this middle area scrollable (only this part scrolls) -->
              <div id="rightScroll"
                   class="mt-6 space-y-6 text-base leading-relaxed min-h-0 overflow-y-auto pr-2 hide-scrollbar">
                <p id="salesLine" class="text-lg">
                  A wild cottage garden in pale tones—pastels, whites and silvers—held by clear structure and a soft silver screen.
                  Basalt steppers guide a sensory walk through scent, movement and seasonal bloom, while layered planting quietly builds habitat and everyday calm.
                </p>

                <div class="grid grid-cols-1 gap-5">
                  <div class="border-l-2 border-gardener-green/20 pl-5">
                    <div class="text-sm font-medium mb-2">Designed for</div>
                    <ul id="designedFor" class="text-sm leading-relaxed opacity-80 list-disc pl-5 space-y-1"></ul>
                  </div>

                  <div class="border-l-2 border-gardener-green/20 pl-5">
                    <div class="text-sm font-medium mb-2">Built with</div>
                    <ul id="builtWith" class="text-sm leading-relaxed opacity-80 list-disc pl-5 space-y-1"></ul>
                  </div>

                  <div class="border-l-2 border-gardener-green/20 pl-5">
                    <div class="text-sm font-medium mb-2">Results over time</div>
                    <ul id="resultsOverTime" class="text-sm leading-relaxed opacity-80 list-disc pl-5 space-y-1"></ul>
                  </div>
                </div>
              </div>

              <div class="mt-auto pt-6 border-t border-gardener-green/10">
                <div class="flex items-center justify-between gap-4 flex-wrap">
                  <a href="mailto:hello@gardenerandson.com.au?subject=Garden%20consultation%20request"
                     class="text-sm border border-gardener-green px-6 py-3 hover:bg-gardener-green hover:text-nostalgic-beige transition-colors">
                    Book a consult
                  </a>
                  <button id="btn-script"
                          class="text-sm border border-gardener-green px-6 py-3 hover:bg-gardener-green hover:text-nostalgic-beige transition-colors">
                    Quick pitch
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>

  <script>
    const GARDENS = [
      {
        title: "Wild Cottage Garden",
        subtitle: "Soft pastels and silver-white tones, hybrid native–exotic planting for birds and habitat.",
        images: [
          "img/garden-01-01.jpg",
          "img/garden-01-02.jpg",
          "img/garden-01-03.jpg",
          "img/garden-01-04.jpg",
          "img/garden-01-05.jpg"
        ],
        salesLine:
          "A wild cottage garden in pale tones—pastels, whites and silvers—held by clear structure and a soft silver screen. Basalt steppers guide a sensory walk through scent, movement and seasonal bloom, while layered planting quietly builds habitat and everyday calm.",
        designedFor: [
          "A guided garden walk (sensory + seasonal)",
          "Nectar-loving birds and pollinators",
          "Cottage character with ecological performance"
        ],
        builtWith: [
          "Structure trees: Pyrus salicifolia, Cercis canadensis, Malus",
          "Soft silver screen: Elaeagnus (Silverberry)",
          "Meadow layer: Poa + Calamagrostis ‘Karl Foerster’ + Festuca glauca",
          "Long-bloom colour: catmint + Salvia nemorosa + Buddleja",
          "Texture + ground: Stachys, Sedum, Pratia; native Enchylaena"
        ],
        resultsOverTime: [
          "More birds, more movement, more life",
          "A stronger seasonal rhythm—bloom → seed → structure",
          "A garden that softens each year, but performs harder"
        ]
      },
      {
        title: "Garden Two",
        subtitle: "Designed for beauty under real conditions — sun, wind, and clay.",
        images: ["img/garden-02-01.jpg","img/garden-02-02.jpg","img/garden-02-03.jpg","img/garden-02-04.jpg","img/garden-02-05.jpg"],
        salesLine: "Ecological structure first, then beauty — a garden that gets better as it matures.",
        designedFor: ["Full sun exposure", "Hot edges + reflected heat", "Low irrigation reliance"],
        builtWith: ["Drought-tuned species mix", "Layering for density and habitat", "Soil building + mulch strategy"],
        resultsOverTime: ["Stability in heatwaves", "Seasonal colour without fragility", "Less weed pressure over time"]
      },
      {
        title: "Garden Three",
        subtitle: "A small space transformed into living infrastructure.",
        images: ["img/garden-03-01.jpg","img/garden-03-02.jpg","img/garden-03-03.jpg","img/garden-03-04.jpg","img/garden-03-05.jpg"],
        salesLine: "Proof that even small gardens can restore habitat and create daily calm.",
        designedFor: ["Compact courtyard / narrow sites", "Entertaining + circulation", "Privacy + green enclosure"],
        builtWith: ["Vertical + mid-layer planting", "Microclimate pockets", "Permeable surfaces where possible"],
        resultsOverTime: ["Cooler outdoor feel", "More pollinators", "A stronger sense of ‘place’"]
      },
      {
        title: "Garden Four",
        subtitle: "A canopy-forward garden: shade, comfort, and long time.",
        images: ["img/garden-04-01.jpg","img/garden-04-02.jpg","img/garden-04-03.jpg","img/garden-04-04.jpg","img/garden-04-05.jpg"],
        salesLine: "Canopy and understorey working together — shade above, habitat below.",
        designedFor: ["Heat mitigation", "Outdoor sitting areas", "Bird life + layered habitat"],
        builtWith: ["Canopy planning + spacing", "Understorey guilds", "Soil/compost integration"],
        resultsOverTime: ["Better summer comfort", "Greater biodiversity", "Less stress on plants and people"]
      },
      {
        title: "Garden Five",
        subtitle: "Water logic: infiltration, holding, and resilience.",
        images: ["img/garden-05-01.jpg","img/garden-05-02.jpg","img/garden-05-03.jpg","img/garden-05-04.jpg","img/garden-05-05.jpg"],
        salesLine: "A garden designed around how water moves — not fighting it.",
        designedFor: ["Slope + runoff", "Clay soils", "Storm events + dry spells"],
        builtWith: ["Contour shaping + micro-catchments", "Permeable paths", "Planting that suits wet/dry cycles"],
        resultsOverTime: ["Less water loss", "Healthier root systems", "More consistent growth across seasons"]
      },
      {
        title: "Garden Six",
        subtitle: "An indigenous / place-based garden that belongs.",
        images: ["img/garden-06-01.jpg","img/garden-06-02.jpg","img/garden-06-03.jpg","img/garden-06-04.jpg","img/garden-06-05.jpg"],
        salesLine: "Planting that belongs to the land — supporting local ecology and deepening the feeling of home.",
        designedFor: ["Local birds + insects", "Low intervention over time", "A grounded, native aesthetic"],
        builtWith: ["Local provenance logic", "Layered habitat structure", "Maintenance pathways that keep it tidy"],
        resultsOverTime: ["More wildlife presence", "A calmer garden rhythm", "Seasonal richness with coherence"]
      }
    ];

    let currentGardenIndex = 0;
    let currentImageIndex = 0;
    let timer = null;
    let autoplay = true;

    const imagePanel = document.getElementById("imagePanel");
    const gardenTitle = document.getElementById("gardenTitle");
    const gardenSubtitle = document.getElementById("gardenSubtitle");
    const salesLine = document.getElementById("salesLine");
    const designedFor = document.getElementById("designedFor");
    const builtWith = document.getElementById("builtWith");
    const resultsOverTime = document.getElementById("resultsOverTime");
    const thumbRow = document.getElementById("thumbRow");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const btnScript = document.getElementById("btn-script");
    const rightScroll = document.getElementById("rightScroll");

    function setList(el, items) {
      el.innerHTML = "";
      items.forEach((t) => {
        const li = document.createElement("li");
        li.textContent = t;
        el.appendChild(li);
      });
    }

    function applyImage(el, src) {
      el.style.backgroundImage = `url('${src}')`;
      el.style.backgroundSize = "cover";
      el.style.backgroundPosition = "center";
      el.style.backgroundRepeat = "no-repeat";
    }

    function setActiveThumb(index) {
      const buttons = thumbRow.querySelectorAll("button[data-index]");
      buttons.forEach((b) => {
        const isActive = Number(b.dataset.index) === index;
        b.classList.toggle("bg-gardener-green", isActive);
        b.classList.toggle("text-nostalgic-beige", isActive);
        b.classList.toggle("border-gardener-green", isActive);
        b.classList.toggle("bg-gardener-green/5", !isActive);
        b.classList.toggle("text-gardener-green", !isActive);
      });

      const active = thumbRow.querySelector(`button[data-index="${index}"]`);
      if (active) active.scrollIntoView({ behavior: "smooth", inline: "center", block: "nearest" });
    }

    function render(gIndex, iIndex, instant = false) {
      const g = GARDENS[gIndex];
      currentGardenIndex = gIndex;
      currentImageIndex = iIndex;

      const safeImages = Array.isArray(g.images) && g.images.length ? g.images : [];
      const src = safeImages[currentImageIndex] || safeImages[0] || "";

      if (!instant) {
        imagePanel.classList.add("fade");
        imagePanel.style.opacity = "0";
        setTimeout(() => {
          applyImage(imagePanel, src);
          imagePanel.style.opacity = "1";
        }, 220);
      } else {
        applyImage(imagePanel, src);
        imagePanel.style.opacity = "1";
      }

      gardenTitle.textContent = g.title;
      gardenSubtitle.textContent = g.subtitle;
      salesLine.textContent = g.salesLine;

      setList(designedFor, g.designedFor);
      setList(builtWith, g.builtWith);
      setList(resultsOverTime, g.resultsOverTime);

      setActiveThumb(gIndex);

      // NEW: reset right-panel scroll to top whenever garden changes
      if (rightScroll) rightScroll.scrollTo({ top: 0, behavior: "smooth" });
    }

    function nextImageOrGarden() {
      const g = GARDENS[currentGardenIndex];
      const total = (g.images && g.images.length) ? g.images.length : 1;

      if (currentImageIndex < total - 1) {
        render(currentGardenIndex, currentImageIndex + 1);
        return;
      }
      const nextGarden = (currentGardenIndex + 1) % GARDENS.length;
      render(nextGarden, 0);
    }

    function prevImageOrGarden() {
      const g = GARDENS[currentGardenIndex];
      const total = (g.images && g.images.length) ? g.images.length : 1;

      if (currentImageIndex > 0) {
        render(currentGardenIndex, currentImageIndex - 1);
        return;
      }
      const prevGarden = (currentGardenIndex - 1 + GARDENS.length) % GARDENS.length;
      const prevTotal = (GARDENS[prevGarden].images && GARDENS[prevGarden].images.length) ? GARDENS[prevGarden].images.length : 1;
      render(prevGarden, Math.max(0, prevTotal - 1));
    }

    function stopAutoplay() { if (timer) clearInterval(timer); timer = null; }
    function startAutoplay() {
      stopAutoplay();
      if (!autoplay) return;
      timer = setInterval(nextImageOrGarden, 5000);
    }

    document.addEventListener("DOMContentLoaded", () => {
      GARDENS.forEach((g, i) => {
        const b = document.createElement("button");
        b.dataset.index = i;
        b.className =
          "no-select snap-start shrink-0 w-40 h-24 border border-gardener-green/10 bg-gardener-green/5 hover:bg-gardener-green hover:text-nostalgic-beige transition-colors text-left p-4 text-sm flex flex-col justify-between";
        b.innerHTML = `<div class="font-medium leading-tight">${g.title}</div><div class="text-xs opacity-70">View</div>`;
        b.addEventListener("click", () => { render(i, 0); startAutoplay(); });
        thumbRow.appendChild(b);
      });

      render(0, 0, true);
      startAutoplay();

      prevBtn.addEventListener("click", () => { prevImageOrGarden(); startAutoplay(); });
      nextBtn.addEventListener("click", () => { nextImageOrGarden(); startAutoplay(); });

      let pitchMode = false;
      btnScript.addEventListener("click", () => {
        pitchMode = !pitchMode;
        const g = GARDENS[currentGardenIndex];
        if (!pitchMode) {
          salesLine.textContent = g.salesLine;
          btnScript.textContent = "Quick pitch";
          return;
        }
        salesLine.textContent =
          "“This is a wild cottage garden — designed to thrive in real conditions. It’s layered, tuned to the site, and built to mature into depth. The planting supports birds and pollinators, while the garden becomes calmer and richer each season.”";
        btnScript.textContent = "Back";
        if (rightScroll) rightScroll.scrollTo({ top: 0, behavior: "smooth" });
      });

      window.addEventListener("keydown", (e) => {
        if (e.key === "ArrowRight") { nextImageOrGarden(); startAutoplay(); }
        if (e.key === "ArrowLeft") { prevImageOrGarden(); startAutoplay(); }
      });

      let startX = 0, startY = 0, tracking = false;

      document.body.addEventListener("touchstart", (e) => {
        if (!e.touches || e.touches.length !== 1) return;
        tracking = true;
        startX = e.touches[0].clientX;
        startY = e.touches[0].clientY;
      }, { passive: true });

      document.body.addEventListener("touchend", (e) => {
        if (!tracking) return;
        tracking = false;

        const touch = e.changedTouches && e.changedTouches[0];
        if (!touch) return;

        const dx = touch.clientX - startX;
        const dy = touch.clientY - startY;

        if (Math.abs(dx) > 50 && Math.abs(dx) > Math.abs(dy) * 1.4) {
          if (dx < 0) nextImageOrGarden();
          else prevImageOrGarden();
          startAutoplay();
        }
      }, { passive: true });
    });
  </script>
</body>
</html>
